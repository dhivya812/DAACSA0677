def sort_array_by_parity(nums):
    n = len(nums)
    sorted_nums = nums[:]
    for i in range(n):
        for j in range(i+1, n):
            if (sorted_nums[i] % 2 == 0 and sorted_nums[j] % 2 == 0 and i % 2 == 0 and j % 2 == 0) or \
               (sorted_nums[i] % 2 != 0 and sorted_nums[j] % 2 != 0 and i % 2 != 0 and j % 2 != 0):
                if sorted_nums[i] > sorted_nums[j]:
                    sorted_nums[i], sorted_nums[j] = sorted_nums[j], sorted_nums[i]
    return sorted_nums

# Example usage:
nums = [4, 2, 5, 7, 1, 3]
sorted_nums = sort_array_by_parity(nums)
print(sorted_nums)
